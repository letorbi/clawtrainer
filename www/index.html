<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
        <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src * 'unsafe-inline'; media-src *" />

        <title>Nappy Fingers</title>
        <link href="css/nappy.css" rel="stylesheet" />
        <link href="css/touch-menu-la.css" rel="stylesheet" />
    </head>
    <body>
        <h1 class="toolbar"><span id="toolbar_icon_menu"><i class="material-icons md-dark">menu</i></span><a href="#" id="toolbar_icon_back" onclick="window.history.back();return false"><i class="material-icons md-dark">arrow_back</i></a><span id="toolbar_title">Nappy Fingers</span></h1>
        <div id="content">
            <div id="main_content">
                <select class="big_select" name="program_select"></select>
                <div id="program_details_header"></div>
                <div class="button_container">
                    <button class="button_flat" name="clone">Clone</button>
                    <button class="button_flat" name="edit">Edit</button>
                    <button class="button_flat" name="delete">Delete</button>
                </div>
                <div id="program_details_exercises"></div>
                <button class="button_round" name="start"><i class="material-icons md-light md-36">play_arrow</i></button>
            </div>
            <div id="run_content">
                <div class="board_outer_container">
                    <div class="board_inner_container">
                        <img class="board_img" src="" alt=""/>
                        <img class="overlay_img overlay_left" src="" alt=""/>
                        <img class="overlay_img overlay_right" src="" alt=""/>
                    </div>
                </div>
                <h2 id="exercise_title"></h2>
                <p id="exercise_description"></p>
                <div id="counter"><span id="exercise_counter"></span><span id="time_counter"></span><span id="repeat_counter"></span></div>
                <div id="pbars">
                    <progress id="hold_pbar" max="7" value="0"></progress><progress id="rest_pbar" max="3" value="0"></progress>
                    <progress id="pause_pbar" max="7" value="0"></progress>
                </div>
                <!--<div id="pause_overlay"><i class="material-icons md-dark md-288">pause_circle_outline</i></div>-->
                <button class="button_wide" name="pause"><i class="material-icons md-dark">pause</i>Suspend</button>
            </div>
            <div id="edit_content">
                <template id="template_edit">
                    <form id="program_edit" onsubmit="return false;">
                        <div class="edit_header">
                            <label for="edit_program_title" class="edit-label edit-row1">Title</label>
                            <input id="edit_program_title" class="edit-input edit-row1" type="text""/>

                            <label for="edit_program_description" class="edit-label edit-row2">Description</label>
                            <textarea id="edit_program_description" class="edit-input edit-row2"></textarea>
                        </div>
                        <button class="button_wide button_add" name="add_exercise"><i class="material-icons md-dark">add</i>Add Exercise</button>
                    </form>
                </template>
                <template id="template_edit_exercise">
                    <div class="edit_pause">
                        <label for="edit_exercise_pause" class="edit-label edit-row1">Pause</label>
                        <input id="edit_exercise_pause" class="edit-input edit-row1" type="number" step="1" min="15"/>
                        <label for="edit_exercise_pause" class="edit-label-right edit-row1">s</label>
                    </div>

                    <div class="edit_exercise">
                        <div class="edit_exercise_number edit-label edit-row1"></div>
                        <div class="board_inner_container edit-input-big edit-row1">
                            <img class="board_img" src="" alt="">
                            <img class="overlay_img overlay_left" src="" alt="">
                            <img class="overlay_img overlay_right" src="" alt="">
                        </div>

                        <label for="edit_exercise_title" class="edit-label edit-row2">Title</label>
                        <input id="edit_exercise_title" class="edit-input-big edit-row2" type="text"/>

                        <label for="edit_exercise_description" class="edit-label edit-row3">Description</label>
                        <textarea id="edit_exercise_description" class="edit-input-big edit-row3"></textarea>

                        <label for="edit_exercise_left" class="edit-label edit-row4">Left hand</label>
                        <select id="edit_exercise_left" class="edit-input-big edit-row4"></select>

                        <label for="edit_exercise_right" class="edit-label edit-row5">Right hand</label>
                        <select id="edit_exercise_right" class="edit-input-big edit-row5"></select>

                        <label for="edit_exercise_hold" class="edit-label edit-row6">Hold</label>
                        <input id="edit_exercise_hold" class="edit-input edit-row6" type="number" min="1" step="1"/>
                        <label for="edit_exercise_hold" class="edit-label-right edit-row6">s</label>

                        <label for="edit_exercise_rest" class="edit-label edit-row7">Rest</label>
                        <input id="edit_exercise_rest" class="edit-input edit-row7" type="number"min="1" step="1"/>
                        <label for="edit_exercise_rest" class="edit-label-right edit-row7">s</label>

                        <label for="edit_exercise_repeat" class="edit-label edit-row8">Repeat</label>
                        <input id="edit_exercise_repeat" class="edit-input edit-row8" type="number" min="1" step="1"/>
                        <label for="edit_exercise_repeat" class="edit-label-right edit-row8">times</label>

                        <button name="delete_exercise" class="edit-span edit-row9 button_wide button_delete"><i class="material-icons md-dark">delete</i>Delete Exercise</button>
                    </div>

                    <button class="button_add button_wide" name="add_exercise"><i class="material-icons md-dark">add</i>Add Exercise</button>
                </template>
            </div>
            <div id="about_content">
                <h2>Nappy Fingers</h2>
                <p>Finger strength is important for hard climbing. Hangboards (fingerboards) are the most effective way to improve finger strength.</p>
                <p>This app supports you in your hangboard training on the <i>Beastmaker 1000</i> and the <i>Beastmaker 2000</i>. Other hangboards will be supported eventually.</p>
                <h3>Hangboard repeaters</h3>
                <p>Training on hangboards means executing sets of short hangs with short rests in between. A set may consist of six hangs of seven seconds each, for example, seperated by rests of three seconds each. All six repeats are done on the same holds with the same grip type (finger position). Such a set is called an <i>exercise</i> is Nappy Fingers. After the exercise, you take a rest for some minutes. Then you move on to the next exercise on other holds. A complete workout of several exercises is called a <i>program</i> in Nappy Fingers.</p>
                <p>The repeater method trains both your strength endurance and your maximum strength.</p>
                <h3>Maximum hangs</h3>
                <p>An alternative method is to hang for longer times of ten or twelve seconds. Holds and grip type are chosen such that each hang requires maximum effort. The rests between the hangs are much longer, up to three or five minutes, to allow for a full recovery. A set again comprises three or five repeats on the same hold.</p>
                <p>The maximum hangs method mostly improves maximum strength. Dave MacLeod explains this method in <a href="https://youtu.be/VeKE5VH5-qg" target="_blank">this video</a>.</p>
                <h3>Smart beastmaking</h3>
                <p>Nappy Fingers is useful for both methods and comes with a number of built-in programs for both methods. Nappy Fingers guides you through these programs with detailed instructions, using spoken language, pictures and descriptive texts.</p>
                <p>An integrated editor allows to modify these programs and to create new custom programs according to your own preferences. There is an option for exporting and importing custom programs as JSON files. These files can be edited with a normal text editor and can easily be shared with other people.</p>
                <h3>Strong fingers for changing the baby</h3>
                <p>I got myself a hangboard and wrote this app when we had our first baby. There is less time for actual climbing now, but still enough room for an occasional hangboard session between changing the diapers.</p>
                <p>Feedback and suggestions are welcome. If you send me your custom programs, I will consider them for inclusion as built-ins.</p>
                <p>&copy; 2018 <a href="mailto:danielschroeer@gmail.com">Daniel Schr√∂er</a></p>
            </div>
            <div id="hangboard_selector_content">
                <form id="hangboard_select" onsubmit="return false;"></form>
            </div>
        </div>
        <div id="drawer" class="touch-menu-la">
            <header class="drawer-header"><div class="drawer-header-content"></div></header>
            <div class="menu-items">
                <a id="a_switch_board" href="#"><i class="material-icons md-dark">fitness_center</i>Switch hangboard</a>
                <hr/>
                <a id="a_export_programs" href="#"><i class="material-icons md-dark">file_download</i>Export custom programs</a>
                <a id="a_import_programs" href="#"><i class="material-icons md-dark">file_upload</i>Import custom programs</a>
                <hr/>
                <a id="a_about" href="#"><i class="material-icons md-dark">info</i>About</a>
            </div>
            <input type="file" id="fileElem" style="display:none" onchange="uploadPrograms(this.files)">
        </div>
        <script src="js/boards.js"></script>
        <script src="js/programs.js"></script>
        <script src="js/sound.js"></script>
        <script src="js/nappy.js"></script>
        <script src="js/hammer.min.js"></script>
        <script src="js/touch-menu-la.js"></script>
        <script src="cordova.js"></script>
        <script>
            var APP = document.URL.indexOf( 'http://' ) === -1 && document.URL.indexOf( 'https://' ) === -1;
            var exportPrograms;
            if ( APP ) {
                exportPrograms = saveProgramsAsFile;
                document.addEventListener('deviceready', function() {
                    console.log('Running as app');
                    init();
                }, false);
            }
            else {
                console.log('Running in browser');
                exportPrograms = downloadPrograms;
                window.plugins = { insomnia: { keepAwake: function() {}, allowSleepAgain: function() {} } };
                StatusBar = { hide: function() {} };
                init();
            }  
        </script>
    </body>
</html>